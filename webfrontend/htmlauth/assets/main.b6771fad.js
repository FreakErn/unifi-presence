import{l as g,a as L,u as B,r as j,c as N,w as c,Q as de,o as u,b as o,d as ce,e as m,f as E,g as ue,h as oe,i as Se,j as me,k as K,m as H,n as a,t as l,p as _,q as y,s as M,v as ge,x as h,F as V,y as Ee,z as x,A as X,B as _e,C as Ie,D as ae,E as ie,G as q,H as Z,I as F,J as $,K as re,L as le,M as Te,N as J,O as fe,P as pe,R as ve,S as Ne,T as he,U as Oe,V as Re,W as we,X as Ce,Y as Ae,Z as be}from"./vendor.ec533a52.js";const Le=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))t(r);new MutationObserver(r=>{for(const d of r)if(d.type==="childList")for(const s of d.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&t(s)}).observe(document,{childList:!0,subtree:!0});function i(r){const d={};return r.integrity&&(d.integrity=r.integrity),r.referrerpolicy&&(d.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?d.credentials="include":r.crossorigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function t(r){if(r.ep)return;r.ep=!0;const d=i(r);fetch(r.href,d)}};Le();const ye={},Y={ERROR:"error",RESET_ERROR:"resetError",LOADING:"setLoading"},Ve=()=>({error:null,loading:!1}),Fe={},Ue={[Y.ERROR](e,n){e.error=n},[Y.RESET_ERROR](e){e.error=null},[Y.LOADING](e,n){e.loading=n}};var U={name:"Global",namespaced:!0,state:Ve,actions:Fe,mutations:Ue,mutationTypes:g.exports.mapValues(Y,e=>`Global/${e}`),actionTypes:g.exports.mapValues(ye,e=>`Global/${e}`)};const b={LOAD_CONFIG:"loadConfig",SAVE_CONFIG:"saveConfig",LOAD_STATS:"loadStats",LOAD_CLIENTS:"loadClients",SAVE_CLIENTS:"saveClients",RESTART_SERVICE:"restartService",LOAD_SITES:"loadSites"},S={STORE_CONFIG:"storeConfig",SHOW_TWO_FACTOR:"showTwoFactor",HIDE_TWO_FACTOR:"hideTwoFactor",STORE_STATS:"storeStats",SET_LOGIN_REQUIRED:"setLoginRequired",SET_LOGIN_ERROR:"setLoginError",SET_CONNECTION_ERROR:"setConnectionError",SET_CLIENTS:"setClients",SET_CONFIG_CLIENTS:"setConfigClients",SET_SERVICE_STATUS:"setServiceStatus",SET_SITES:"setSites"},De=()=>({config:{},showTwoFactor:!1,version:null,versionError:!1,stats:{},loginRequired:!1,loginError:!1,connectionError:!1,existingClients:[],clients:[],serviceStatus:"DISCONNECTED",sites:[{label:"Default",value:"default"}]}),D=async(e,n)=>{try{e.commit(U.mutationTypes.RESET_ERROR,null,{root:!0}),await n(),e.commit(S.SET_CONNECTION_ERROR,!1)}catch(i){if(i.response){if(i.response.status===499)throw e.commit(S.SHOW_TWO_FACTOR),i;if(i.response.status===403)throw e.commit(S.SET_LOGIN_REQUIRED,!0),e.commit(S.SET_LOGIN_ERROR,!0),i;if(i.response.status===408)throw e.commit(S.SET_CONNECTION_ERROR,!0),i;const t=g.exports.get(i,"response.data.error",i.message);e.commit(U.mutationTypes.ERROR,t,{root:!0})}else e.commit(U.mutationTypes.ERROR,i.message,{root:!0});throw i}},Ge={async[b.LOAD_CONFIG](e){return D(e,async()=>{const n=await L.get("/admin/plugins/unifi_presence/api/config");e.commit(S.STORE_CONFIG,n.data)})},async[b.SAVE_CONFIG](e){return e.commit(S.HIDE_TWO_FACTOR),e.commit(S.SET_LOGIN_ERROR,!1),D(e,async()=>{const n=await L.put("/admin/plugins/unifi_presence/api/config",Object.assign(e.state.config,{loginRequired:e.state.loginRequired}));e.commit(S.STORE_CONFIG,n.data)})},async[b.LOAD_STATS](e){return D(e,async()=>{const n=await L.get("/admin/plugins/unifi_presence/api/stats");e.commit(S.STORE_STATS,n.data),e.commit(S.SET_LOGIN_REQUIRED,!1)})},async[b.LOAD_CLIENTS](e){return D(e,async()=>{const n=await L.get("/admin/plugins/unifi_presence/api/clients");e.commit(S.SET_CLIENTS,n.data.clients)})},async[b.SAVE_CLIENTS](e,{mac:n,value:i}){return D(e,async()=>{const t=e.state.clients.filter(d=>d.mac!=n&&d.watched||d.mac==n&&i===!0).map(d=>{const s=Object.assign({},d);return delete s.watched,s}),r=await L.put("/admin/plugins/unifi_presence/api/config",{clients:t});e.commit(S.SET_CONFIG_CLIENTS,r.data.clients)})},async[b.RESTART_SERVICE](e){return D(e,async()=>{await L.post("/admin/plugins/unifi_presence/api/restartService")})},async[b.LOAD_SITES](e){return D(e,async()=>{const n=await L.get("/admin/plugins/unifi_presence/api/sites");e.commit(S.SET_SITES,n.data.sites)})}},Pe={[S.STORE_CONFIG](e,n){e.config=n,e.existingClients=n.clients.map(i=>i.mac)},[S.STORE_STATS](e,n){n.version&&(e.version=n.version,e.versionError=n.versionError),n.wan&&n.www&&(e.stats={wan:n.wan,www:n.www})},[S.SHOW_TWO_FACTOR](e){e.showTwoFactor=!0,e.config.token=null,e.twoFaEnabled=!0},[S.HIDE_TWO_FACTOR](e){e.showTwoFactor=!1},[S.SET_LOGIN_REQUIRED](e,n){e.loginRequired=n},[S.SET_LOGIN_ERROR](e,n){e.loginError=n,e.twoFaEnabled=!1},[S.SET_CONNECTION_ERROR](e,n){e.connectionError=n},[S.SET_CLIENTS](e,n){n=n.map(i=>(i.watched=e.existingClients.includes(i.mac),i)),e.clients=g.exports.orderBy(n,["watched","type"],["desc","desc"])},[S.SET_CONFIG_CLIENTS](e,n){e.config.clients=n},[S.SET_SERVICE_STATUS](e,n){e.serviceStatus=n},[S.SET_SITES](e,n){e.sites=n}};var f={name:"Settings",namespaced:!0,state:De,actions:Ge,mutations:Pe,mutationTypes:g.exports.mapValues(S,e=>`Settings/${e}`),actionTypes:g.exports.mapValues(b,e=>`Settings/${e}`)};var Q=(e,n)=>{for(const[i,t]of n)e[i]=t;return e};const ke={name:"App",setup(){const e=B();let n=null;const i=()=>{const t=`ws://${document.location.hostname}:3000/plugins/unifi_presence/api/socket`;console.log("connect to socket:",t);const r=new WebSocket(t,"webClient");r.onopen=d=>{n=setInterval(()=>r.send("ping"),2e4)},r.onmessage=d=>{if(d.data==="pong")return;const s=JSON.parse(d.data);switch(s.type){case"stats":return e.commit(f.mutationTypes.STORE_STATS,s.data);case"serviceStatus":return e.commit(f.mutationTypes.SET_SERVICE_STATUS,s.data.status)}},r.onclose=()=>{clearInterval(n),console.log("lost Connection"),setTimeout(i,5e3)}};i()}};function We(e,n,i,t,r,d){const s=j("router-view");return u(),N(de,{view:"hHh lpR fFf"},{default:c(()=>[o(ce,null,{default:c(()=>[o(s)]),_:1})]),_:1})}var Me=Q(ke,[["render",We]]);const Qe={},G={LOAD_SETTINGS:"LOAD_SETTINGS",SAVE_SETTINGS:"SAVE_SETTINGS",LOAD_CLIENTS:"LOAD_CLIENTS",SAVE_CLIENTS:"SAVE_CLIENTS",RESTART_SERVICE:"RESTART_SERVICE"},ee=async(e,n)=>{e.commit(U.mutationTypes.LOADING,!0,{root:!0});try{await n()}finally{e.commit(U.mutationTypes.LOADING,!1,{root:!0})}},He={async[G.LOAD_SETTINGS](e){return ee(e,async()=>{await e.dispatch(f.actionTypes.LOAD_CONFIG,null,{root:!0});const n=e.rootState.Settings.config;n.ipaddress&&n.username&&n.password&&(await e.dispatch(f.actionTypes.LOAD_STATS,null,{root:!0}),await e.dispatch(f.actionTypes.LOAD_SITES,null,{root:!0}))})},async[G.SAVE_SETTINGS](e){return ee(e,async()=>{await e.dispatch(f.actionTypes.SAVE_CONFIG,null,{root:!0}),await e.dispatch(f.actionTypes.LOAD_STATS,null,{root:!0}),await e.dispatch(f.actionTypes.LOAD_SITES,null,{root:!0})})},async[G.LOAD_CLIENTS](e){return ee(e,async()=>{g.exports.isEmpty(e.rootState.Settings.config)&&await e.dispatch(G.LOAD_SETTINGS),await e.dispatch(f.actionTypes.LOAD_CLIENTS,null,{root:!0})})},async[G.SAVE_CLIENTS](e,{mac:n,value:i}){return e.dispatch(f.actionTypes.SAVE_CLIENTS,{mac:n,value:i},{root:!0})},async[G.RESTART_SERVICE](e){return e.dispatch(f.actionTypes.RESTART_SERVICE,null,{root:!0})}};var P={name:"Actions",namespaced:!0,actions:He,actionTypes:g.exports.mapValues(G,e=>`Actions/${e}`),mutationTypes:g.exports.mapValues(Qe,e=>`Actions/${e}`)},qe="/admin/plugins/unifi_presence/assets/udm.c8127c61.png";const $e={name:"UnifiController",setup(){const e=B(),n=m(()=>e.state.Settings.config),i=m(()=>e.state.Global.loading),t=m(()=>e.state.Settings.loginRequired),r=m(()=>e.state.Settings.version),d=m(()=>e.state.Settings.versionError),s=m(()=>e.state.Settings.stats),T=m(()=>e.state.Settings.serviceStatus),O=m(()=>e.state.Global.error),k=m(()=>e.state.Settings.connectionError),R=m(()=>!(t.value||O.value||k.value||r.value===null||r.value<"6.4.54"||!n.value.username||!n.value.ipaddress||!n.value.password||T.value!=="CONNECTED")),p=C=>C<3600?`${Math.round(C/60)}m`:C<86400?`${Math.round(C/60/60)}h`:`${Math.floor(C/60/60/24)}d`,w=m(()=>p(s.value.www.uptime)),W=m(()=>p(s.value.wan.stats.uptime)),v=E(!1);return{isLoading:i,version:r,versionError:d,loginRequired:t,error:O,connected:R,stats:s,ispUptime:w,udmUptime:W,serviceStatus:T,restartLoading:v,restartService:async()=>{v.value=!0,await e.dispatch(P.actionTypes.RESTART_SERVICE,null,{root:!0}),v.value=!1},udm:qe}}},ze={class:"text-h6"},Be={key:0,class:"text-weight-medium text-negative"},xe={key:1,class:"text-subtitle2"},Ye={key:2,class:"text-weight-medium text-negative"},je={class:"text-h6"},Ke={class:"text-subtitle2"},Xe={class:"row"},Ze={class:"col-4 text-weight-light"},Je={class:"text-weight-medium"},et={class:"col-5 text-weight-light"},tt={class:"text-weight-medium"},nt={class:"col-3 text-weight-light"},st={class:"text-weight-medium"},ot={class:"col-9 text-weight-light"},at={class:"text-weight-medium"},it={class:"col-3 text-weight-light"},rt={class:"text-weight-medium"};function lt(e,n,i,t,r,d){return u(),N(_e,{class:"my-card"},{default:c(()=>[o(ue,{src:t.udm,"spinner-color":"white"},null,8,["src"]),t.isLoading?(u(),N(oe,{key:0,align:"center"},{default:c(()=>[o(Se,{color:"primary",size:"3em",class:"q-mb-md"})]),_:1})):(u(),N(me,{key:1},{default:c(()=>[o(Ee,null,{default:c(()=>[t.connected?(u(),_(V,{key:1},[o(K,null,{default:c(()=>[o(H,null,{default:c(()=>[a("div",je,l(t.stats.wan.name),1),a("div",Ke,l(e.$t(`SERVICE.${t.serviceStatus}`)),1),o(ge,{caption:""},{default:c(()=>[h(l(e.$t("UNIFI.VERSION",{version:t.version})),1)]),_:1})]),_:1}),o(H,{avatar:""},{default:c(()=>[o(M,{size:"40px",name:"verified",color:"light-green-7"})]),_:1})]),_:1}),o(K,null,{default:c(()=>[o(H,null,{default:c(()=>[a("div",Xe,[a("div",Ze,[a("span",Je,l(e.$t("UNIFI.CPU"))+":",1),h(" "+l(t.stats.wan.stats.cpu)+"%",1)]),a("div",et,[a("span",tt,l(e.$t("UNIFI.MEMORY"))+":",1),h(" "+l(t.stats.wan.stats.mem)+"Mb",1)]),a("div",nt,[a("span",st,l(e.$t("UNIFI.UPTIME"))+":",1),h(" "+l(t.udmUptime),1)]),a("div",ot,[a("span",at,l(e.$t("UNIFI.ISP"))+":",1),h(" "+l(t.stats.www.isp),1)]),a("div",it,[a("span",rt,l(e.$t("UNIFI.UPTIME"))+":",1),h(" "+l(t.ispUptime),1)])])]),_:1})]),_:1})],64)):(u(),N(K,{key:0},{default:c(()=>[o(H,null,{default:c(()=>[a("div",ze,l(e.$t(`SERVICE.${t.serviceStatus}`)),1),t.versionError?(u(),_("div",Be,l(e.$t("COMMON.VERSION_ERROR",{version:t.version})),1)):y("",!0),t.loginRequired?(u(),_("div",xe,l(e.$t("UNIFI.LOGIN_REQUIRED")),1)):y("",!0),t.error?(u(),_("div",Ye,l(t.error),1)):y("",!0)]),_:1}),o(H,{avatar:""},{default:c(()=>[o(M,{size:"40px",name:"warning_amber",color:"orange-14"})]),_:1})]),_:1}))]),_:1})]),_:1})),o(x),o(oe,null,{default:c(()=>[o(X,{class:"q-ml-md",outline:"",icon:"restart_alt",size:"sm",color:"orange-14",loading:t.restartLoading,onClick:t.restartService,"data-role":"none"},{default:c(()=>[h(l(e.$t("SERVICE.RESTART")),1)]),_:1},8,["loading","onClick"])]),_:1})]),_:1})}var dt=Q($e,[["render",lt]]);const ct={name:"Page",components:{UnifiController:dt},setup(){return{}}},ut={class:"q-pa-s,"},St={class:"q-gutter-y-md bg-light-green-7"},mt={class:"row"},gt={class:"col-5 col-md-4 col-lg-3 q-pt-md"},Et={class:"col-6 col-md-7 col-lg-8"};function _t(e,n,i,t,r,d){const s=j("UnifiController"),T=j("router-view");return u(),_(V,null,[a("div",ut,[a("div",St,[o(Ie,{"inline-label":"",dense:"",class:"text-grey-3 bg-light-green-6","active-color":"white bg-light-green-7","indicator-color":"light-green-9",align:"justify"},{default:c(()=>[o(ie,{name:"mails",to:{name:"settings"},icon:"settings",label:e.$t("UNIFI.SETTINGS"),"data-role":"none"},null,8,["label"]),o(ie,{name:"alarms",to:{name:"clients"},icon:"router",label:e.$t("UNIFI.DEVICES"),"data-role":"none"},null,8,["label"])]),_:1})])]),o(ae,{padding:""},{default:c(()=>[a("div",mt,[a("div",gt,[o(s)]),o(q),a("div",Et,[o(T)])])]),_:1})],64)}var It=Q(ct,[["render",_t]]),Tt=e=>({required:[n=>!!n||e("VALIDATION.REQUIRED")],topic:[n=>/^[\w-]+((?:\/[\w-]+)+)?$/.test(n)||e("VALIDATION.INVALID_TOPIC")],ipAddress:[n=>/\b((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(\.|$)){4}\b/.test(n)||e("VALIDATION.INVALID_IP")],port:[n=>n==null||/^((6553[0-5])|(655[0-2][0-9])|(65[0-4][0-9]{2})|(6[0-4][0-9]{3})|([1-5][0-9]{4})|([0-5]{0,5})|([0-9]{1,4}))$/.test(n)||e("VALIDATION.INVALID_PORT")]});const ft={name:"Settings",components:{},setup(){const{t:e}=Z.exports.useI18n({useScope:"global"}),n=B();n.dispatch(P.actionTypes.LOAD_SETTINGS);const i=m(()=>n.state.Settings.config),t=m(()=>n.state.Settings.showTwoFactor),r=m(()=>n.state.Settings.loginRequired),d=m(()=>n.state.Settings.versionError),s=m(()=>n.state.Settings.version),T=m(()=>n.state.Settings.sites),O=m(()=>n.state.Settings.loginError),k=m(()=>n.state.Global.loading),R=E(!1),p={topic:E(null),native:E(null),ipAddress:E(null),port:E(null),username:E(null),password:E(null),twoFa:E(null),site:E(null)},w=async()=>{const W=Object.values(p).filter(I=>I.value&&I.value.validate);if(W.forEach(I=>I.value.validate()),W.find(I=>(I.value.name==="username"||I.value.name==="password")&&O.value||I.value.name==="twoFa"&&t?!1:I.value.hasError)===void 0){R.value=!0;try{await n.dispatch(P.actionTypes.SAVE_SETTINGS)}finally{R.value=!1}}};return{config:i,showPassword:E(!0),showTwoFactor:t,isLoading:k,validationRules:Tt(e),formFields:p,saveSettings:w,isSaving:R,loginRequired:r,loginError:O,sites:T,versionError:d,version:s}}},pt={class:"row"},vt={class:"col-12"},Nt={class:"text-h5 self-end"},ht={class:"text-h5 q-mt-xl self-end"},Ot={key:1,class:"row"},Rt={class:"col-6"},wt={class:"row q-pt-md"},Ct={class:"col-12"};function At(e,n,i,t,r,d){return u(),_(V,null,[a("div",pt,[a("div",vt,[a("div",Nt,l(e.$t("UNIFI.MQTT_SETTINGS")),1),o(x,{spaced:""}),o(F,{name:"topic",ref:t.formFields.topic,disable:t.isSaving||t.isLoading,loading:t.isLoading,modelValue:t.config.topic,"onUpdate:modelValue":n[0]||(n[0]=s=>t.config.topic=s),label:e.$t("UNIFI.TOPIC"),hint:e.$t("UNIFI.TOPIC_HINT"),rules:t.validationRules.topic,"data-role":"none"},null,8,["disable","loading","modelValue","label","hint","rules"]),a("div",ht,l(e.$t("UNIFI.CONTROLLER")),1),o(x,{spaced:""}),o($,{name:"native",ref:t.formFields.native,disable:t.isSaving||t.isLoading,loading:t.isLoading,modelValue:t.config.native,"onUpdate:modelValue":n[1]||(n[1]=s=>t.config.native=s),size:"lg",label:e.$t("UNIFI.NATIVE_HINT")},null,8,["disable","loading","modelValue","label"]),o(F,{name:"ip",ref:t.formFields.ipAddress,disable:t.isSaving||t.isLoading,loading:t.isLoading,modelValue:t.config.ipaddress,"onUpdate:modelValue":n[2]||(n[2]=s=>t.config.ipaddress=s),label:e.$t("UNIFI.IP"),hint:e.$t("UNIFI.IP_HINT"),rules:t.validationRules.ipAddress,"data-role":"none"},null,8,["disable","loading","modelValue","label","hint","rules"]),t.config.native?y("",!0):(u(),N(F,{key:0,name:"port",ref:t.formFields.port,disable:t.isSaving||t.isLoading,loading:t.isLoading,modelValue:t.config.port,"onUpdate:modelValue":n[3]||(n[3]=s=>t.config.port=s),label:e.$t("UNIFI.PORT"),hint:e.$t("UNIFI.PORT_HINT"),rules:t.validationRules.port,"data-role":"none"},null,8,["disable","loading","modelValue","label","hint","rules"])),o(F,{name:"username",ref:t.formFields.username,disable:t.isSaving||t.isLoading,loading:t.isLoading,modelValue:t.config.username,"onUpdate:modelValue":n[4]||(n[4]=s=>t.config.username=s),label:e.$t("UNIFI.USERNAME"),rules:t.validationRules.required,error:t.loginError,"data-role":"none"},null,8,["disable","loading","modelValue","label","rules","error"]),o(F,{name:"password",ref:t.formFields.password,disable:t.isSaving||t.isLoading,loading:t.isLoading,type:t.showPassword?"password":"text",modelValue:t.config.password,"onUpdate:modelValue":n[6]||(n[6]=s=>t.config.password=s),label:e.$t("UNIFI.PASSWORD"),rules:t.validationRules.required,error:t.loginError,"data-role":"none"},{append:c(()=>[o(M,{name:t.showPassword?"visibility_off":"visibility",class:"cursor-pointer",onClick:n[5]||(n[5]=s=>t.showPassword=!t.showPassword)},null,8,["name"])]),_:1},8,["disable","loading","type","modelValue","label","rules","error"]),o(re,{ref:t.formFields.site,modelValue:t.config.site,"onUpdate:modelValue":n[7]||(n[7]=s=>t.config.site=s),disable:t.isSaving||t.isLoading,loading:t.isLoading,"emit-value":"","map-options":"",options:t.sites,label:e.$t("UNIFI.SITE")},null,8,["modelValue","disable","loading","options","label"]),t.showTwoFactor?(u(),_("div",Ot,[a("div",Rt,[o(F,{name:"twoFa",ref:t.formFields.twoFa,disable:t.isSaving||t.isLoading,loading:t.isLoading,type:"text",modelValue:t.config.token,"onUpdate:modelValue":n[8]||(n[8]=s=>t.config.token=s),label:e.$t("UNIFI.TWO_FA"),error:"","data-role":"none"},{append:c(()=>[o(M,{name:"lock",class:"cursor-pointer"})]),_:1},8,["disable","loading","modelValue","label"])]),o(q)])):y("",!0)])]),o(q),a("div",wt,[a("div",Ct,[t.versionError?(u(),N(le,{key:0,rounded:"",class:"bg-red text-white q-mt-md"},{default:c(()=>[h(l(e.$t("COMMON.VERSION_ERROR",{version:t.version})),1)]),_:1})):(u(),N(X,{key:1,loading:t.isSaving,disable:!t.isSaving&&t.isLoading,push:"",color:"light-green-7",icon:"save",size:"md",label:e.$t(t.loginRequired?"COMMON.SAVE_AND_LOGIN_BTN":"COMMON.SAVE_BTN"),onClick:t.saveSettings},null,8,["loading","disable","label","onClick"]))]),o(q)])],64)}var bt=Q(ft,[["render",At]]);const Lt={name:"Clients",setup(){const{t:e}=Z.exports.useI18n({useScope:"global"}),n=B(),i=m(()=>n.state.Settings.versionError),t=m(()=>n.state.Settings.version);i.value===!1&&n.dispatch(P.actionTypes.LOAD_CLIENTS);const r=m(()=>n.state.Global.loading),d=m(()=>{const I=n.state.Settings.clients.filter(A=>{const te=A.type==="WIRELESS",ne=A.type==="WIRED",se=A.type==="WIRELESS"&&!A.experience;return te&&O.value!==te||ne&&R.value!==ne||se&&k.value===!se?!1:p.value?!!(g.exports.lowerCase(A.name).indexOf(g.exports.lowerCase(p.value))!=-1||g.exports.lowerCase(A.mac).indexOf(g.exports.lowerCase(p.value))!=-1||A.ssid&&g.exports.lowerCase(A.ssid).indexOf(g.exports.lowerCase(p.value))!=-1):!0});if(w.value==="standard")return I;const C=["signalPercentage","watched"].includes(w.value)?"desc":"asc";return g.exports.orderBy(I,[w.value],[C])}),s=v=>v>77?"wifi":v>33?"wifi_2_bar":"wifi_1_bar",T=(v,I,C)=>{n.dispatch(P.actionTypes.SAVE_CLIENTS,{mac:v,value:I})},O=E(!0),k=E(!0),R=E(!0),p=E(""),w=E("standard"),W=[{label:e("SORTING.STANDARD"),value:"standard"},{label:e("SORTING.SELECTED"),value:"watched"},{label:e("SORTING.NAME"),value:"name"},{label:e("SORTING.SSID"),value:"ssid"},{label:e("SORTING.EXPERIENCE"),value:"signalPercentage"},{label:e("SORTING.TYPE"),value:"type"}];return{isLoading:r,clients:d,update:T,wifiIcon:s,showWifi:O,showOffline:k,showWired:R,search:p,sorting:w,sortOptions:W,versionError:i,version:t}}},yt=e=>(fe("data-v-206dd034"),e=e(),pe(),e),Vt={key:1,class:"row"},Ft={class:"col-12"},Ut={class:"text-h5 self-end"},Dt={class:"row"},Gt={class:"col-3"},Pt={class:"col-4"},kt={class:"col-2"},Wt={class:"col-2"},Mt={class:"bg-light-green-7 text-white"},Qt=yt(()=>a("th",{class:"text-left"},null,-1)),Ht={class:"text-left"},qt={class:"text-left"},$t={class:"text-left"},zt={class:"text-left"},Bt={class:"text-left"},xt={class:""},Yt={key:0},jt={key:1},Kt={key:2};function Xt(e,n,i,t,r,d){return u(),_(V,null,[t.versionError?(u(),N(le,{key:0,rounded:"",class:"bg-red text-white q-mt-md"},{default:c(()=>[h(l(e.$t("COMMON.VERSION_ERROR",{version:t.version})),1)]),_:1})):y("",!0),t.versionError?y("",!0):(u(),_("div",Vt,[a("div",Ft,[a("div",Ut,l(e.$t("UNIFI.DEVICES")),1),o(x,{spaced:""}),a("p",null,l(e.$t("UNIFI.CLIENT_SELECTION")),1),a("div",Dt,[a("div",Gt,[o(F,{clearable:"","bottom-slots":"",modelValue:t.search,"onUpdate:modelValue":n[0]||(n[0]=s=>t.search=s),label:e.$t("UNIFI.SEARCH"),dense:""},{append:c(()=>[o(M,{name:"search"})]),_:1},8,["modelValue","label"])]),o(q),a("div",Pt,[o($,{modelValue:t.showWifi,"onUpdate:modelValue":n[1]||(n[1]=s=>t.showWifi=s),label:e.$t("UNIFI.SHOW_WIFI")},null,8,["modelValue","label"]),o($,{modelValue:t.showWired,"onUpdate:modelValue":n[2]||(n[2]=s=>t.showWired=s),label:e.$t("UNIFI.SHOW_WIRED")},null,8,["modelValue","label"])]),a("div",kt,[o($,{modelValue:t.showOffline,"onUpdate:modelValue":n[3]||(n[3]=s=>t.showOffline=s),label:e.$t("UNIFI.SHOW_OFFLINE")},null,8,["modelValue","label"])]),a("div",Wt,[o(re,{modelValue:t.sorting,"onUpdate:modelValue":n[4]||(n[4]=s=>t.sorting=s),dense:"","emit-value":"","map-options":"",options:t.sortOptions,label:e.$t("UNIFI.SORT")},null,8,["modelValue","options","label"])])]),o(Te,{bordered:"",separator:"vertical"},{default:c(()=>[a("thead",Mt,[a("tr",null,[Qt,a("th",Ht,l(e.$t("UNIFI.NAME")),1),a("th",qt,l(e.$t("UNIFI.MAC")),1),a("th",$t,l(e.$t("UNIFI.SSID")),1),a("th",zt,l(e.$t("UNIFI.EXPERIENCE")),1),a("th",Bt,l(e.$t("UNIFI.TYPE")),1)])]),a("tbody",xt,[t.isLoading?(u(),_(V,{key:0},J(10,s=>a("tr",{key:s},[(u(),_(V,null,J(6,T=>a("td",{key:T},[o(ve,{animation:"blink",type:"text"})])),64))])),64)):(u(!0),_(V,{key:1},J(t.clients,s=>(u(),_("tr",{key:s.mac},[a("td",null,[o($,{name:s.mac,"onUpdate:modelValue":[T=>t.update(s.mac,!s.watched),T=>s.watched=T],modelValue:s.watched,size:"md"},null,8,["name","onUpdate:modelValue","modelValue"])]),a("td",null,l(s.name),1),a("td",null,l(s.mac),1),a("td",null,l(s.ssid),1),s.type==="WIRELESS"&&s.experience?(u(),_("td",Yt,[h(l(s.experience)+" ",1),o(M,{class:"float-right",name:t.wifiIcon(s.signalPercentage),size:"22px"},null,8,["name"])])):s.type==="WIRELESS"?(u(),_("td",jt,"Offline")):(u(),_("td",Kt,"-")),a("td",null,l(s.type),1)]))),128))])]),_:1})])]))],64)}var Zt=Q(Lt,[["render",Xt],["__scopeId","data-v-206dd034"]]);const Jt={setup(){const e=Ne(),n=he();console.log(n,e)}},en=a("h3",null,"Not Found",-1);function tn(e,n,i,t,r,d){return u(),N(ae,{padding:""},{default:c(()=>[en,o(X,{to:{name:"settings"},label:"open Settings"})]),_:1})}var nn=Q(Jt,[["render",tn]]),sn=[{base:"/admin/plugins/unifi_presence",path:"/",component:It,children:[{name:"settings",path:"",component:bt},{name:"clients",path:"clients",component:Zt}]},{path:"/:pathMatch(.*)*",name:"NotFound",component:nn}],on={COMMON:{SAVE_BTN:"Speichern",SAVE_AND_LOGIN_BTN:"Speichern und Einloggen",VERSION_ERROR:"Die Version deines UniFi Controller ist kleiner als 6.4.54. Bitte aktualisiere zuerst deinen Controller um das Plugin nutzen zu k\xF6nnen. Deine aktuelle Version ist: {version}"},UNIFI:{SETTINGS:"Einstellungen",DEVICES:"Ger\xE4te",MQTT_SETTINGS:"MQTT Einstellungen",CONTROLLER:"UniFi Controller Einstellungen",TOPIC:"MQTT Topic",TOPIC_HINT:"Das Mqtt Topic in dem die Werte geschrieben werden sollen. Z.B. UniFi/clients. Kein Slash am Anfang oder Ende und keine Leer- oder Sonderzeichen",IP:"IP Adresse",IP_HINT:"Gebe hier die IP Adresse des UniFi Controllers an. Stelle Sicher, dass Loxberry zugriff darauf hat.",USERNAME:"Benutzername",PASSWORD:"Passwort",SITE:"UniFi Site",CLIENTS:"UniFi WiFi Ger\xE4te",CLIENT_SELECTION:"Alle selektierten Ger\xE4te werden \xFCberwacht und an MQTT \xFCbermittelt. Alle anderen Ger\xE4te werden ignoriert. Um den Status der Ger\xE4te zu erhalten, m\xFCssen diese Selektiert werden. Es wird automatisch gespeichert.",NAME:"Name",MAC:"Mac Adresse",SSID:"WLAN SSID",EXPERIENCE:"Erfahrung / Signal",TYPE:"Typ",TWO_FA:"Bitte gebe dein 2 Faktor Code ein.",NATIVE_HINT:"Wenn du eine UniFi Dream Machine oder die Dream Machine Pro benutzt, aktiviere bitte den Schalter. Wenn dein Controller woanders l\xE4uft, dann lasse den Schalter bitte aus.",PORT:"Der port um das Dashbaord zu \xF6ffnen - sofern ben\xF6tigt.",PORT_HINT:"Wenn du einen port f\xFCr den Zugriff auf den Controller im Browser brauchst, dann geben diesen bitte hier an.",LOGIN_REQUIRED:"Ausgeloggt, Bitte neu einloggen.",VERSION:"Version {version}",CPU:"CPU",MEMORY:"Mem",UPTIME:"Aktiv",ISP:"ISP",SHOW_WIRED:"Kabelgebunden anzeigen",SHOW_WIFI:"Wifi anzeigen",SHOW_OFFLINE:"Zeige Offline",SORT:"Sortierung",SEARCH:"Suche"},SERVICE:{WAIT_FOR_CONFIG:"Konfigurationsfehler, wartet auf \xC4nderungen",CONNECTED:"Verbunden mit UniFi Controller",DISCONNECTED:"Nicht Verbunden - Neue Verbindung wird hergestellt",UNAUTHORIZED:"Nicht eingeloggt",LOST:"UniFi Event Service nicht erreichbar",RESTART:"Hintergrund Service Neustarten"},SORTING:{STANDARD:"Standard",SELECTED:"Selectiert",NAME:"Name",SSID:"Wlan SSID",EXPERIENCE:"Erfahrung",TYPE:"Typ"},VALIDATION:{REQUIRED:"Diese Feld wird zwingend ben\xF6tigt.",INVALID_TOPIC:"Das Topic darf nur alphanumerisch sein und wird mit einem / gruppiert. Beispielsweise test/topic.",INVALID_IP:"Bitte gebe eine g\xFCltige V4 IP-Addresse ein.",INVALID_PORT:"Bitte gebe einen Port zwischen 0 und 65535 an."}};const z=Oe(Me),an=Re({history:we(),routes:sn}),rn=Z.exports.createI18n({locale:"de",fallbackLocale:"en",messages:{de:on}}),ln=Ce({modules:{[U.name]:U,[f.name]:f,[P.name]:P}});z.use(Ae,{plugins:{Loading:be}});z.use(an);z.use(ln);z.use(rn);z.mount("#unifiPresence");
